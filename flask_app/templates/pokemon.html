{% extends "header.html" %}
{% block content %}
{% if pokemon %}
<h3>{{ pokemon['name'] }}</h3>
    <h5>Basic Info</h5>
    <ul>
        <li>
            Types:
            <ul>
            {% for i in pokemon['types'] %}
                <li>
                    {{ i.type.name }}
                </li>
            {% endfor %}
            </ul>
        </li>
        <li>Height: {{ pokemon['height'] }}</li>
        <li>Weight: {{ pokemon['weight'] }}</li>
        <li>Base Exp: {{ pokemon['base_exp'] }}</li>
    </ul>

    {% if pokemon['abilities'] %}
        <br/>
        <h5>Abilities</h5>
        <ul>
            {% for ability in pokemon['abilities'] %}
                <li>{{ ability }}
            {% endfor %}
        </ul>

    {% endif %}

    {% if pokemon['moves'] %}
        <br/>
        <h5>Moves</h5>
        <ul>
        {% for move in pokemon['moves'] %}
            <li>{{ move }}</li>
        {% endfor %}
        </ul>
    {% endif %}
    
    {# Comments #}
    <div class="row">
      <div class="col-md-10">
        <h1> Comments ({{ comments|length }} comments)</h1>
        <ul class="media-list">
          {% for c in comments %}
          <li class="media review-item" style="border: 1px solid black">
            <div class="media-body">
              <!-- <span class="float-right">
                <small>c.date </small>
              </span> -->
              <!-- add back curly braces when ready -->
              <!-- <a href=" url_for('pokemon.user_detail', username=c.commenter.username) "> -->
                <strong>{{ c.commenter.username }} @ </strong>{{ c.date }}
              <!-- </a> -->
              <p>
                {{ c.content }}
              </p>
            </div>
          </li>
          {% endfor %}
        </ul>
      </div>
    </div>
    
    {% if current_user.is_authenticated %}
    {# Comment submission form #}
    <div class="row">
      <div class="col-md-10">
        <form method="POST" action="">
          {{ form.csrf_token }}
          <div class="form-group">
            {{ form.text.label }}
            {{ form.text(class="form-control") }}
    
            {% if form.text.errors %}
            <div class="alert alert-warning" role="alert">
              {% for error in form.text.errors %}
              <span>{{ error }}</span>
              {% endfor %}
            </div>
            {% endif %}
    
          </div>
          {{ form.submit() }}
        </form>
      </div>
    </div>
    {% endif %}

{% endif %}
{% endblock %}